import{d as si,r as U,K as Qt,a1 as Ji,L as qi,o as le,e as Je,f as de,J as xt,E as Qi,_ as fi,c as ea,B as wn,C as Ft,h as Q,g as Ct,w as gt,z as Ke,x as je,D as ta,j as Ie,R as na,S as ia,m as aa,t as ra,U as la,V as oa,F as sa,y as fa}from"./index-CS97xECk.js";import{b as ca,c as ha,a as da}from"./line-r0x5eg2L.js";import{i as ua}from"./index-Bwm8AFsF.js";import{b as En,g as _a,G as pa,a as ga}from"./wokingtion-B2wKtcAy.js";class va{constructor(n){this.element=n}draw(n){const[t,i]=this.element.pRealSize.split(",").map(Number);n.save(),n.strokeStyle=this.element.HB_COLOR||"#fff",n.lineWidth=this.element.HB_SIZE||1,this.element.ISDash&&n.setLineDash([5,5]),n.beginPath(),n.rect(this.element.pStart.X,this.element.pStart.Y,t,i),n.stroke(),this.element.DrawFilled&&(n.fillStyle=this.element.TC_COLOR||"#fff",n.fill()),n.restore()}containsPoint(n,t){const[i,a]=this.element.pRealSize.split(",").map(Number),r={x:this.element.pStart.X,y:this.element.pStart.Y,width:i,height:a};return n>=r.x&&n<=r.x+r.width&&t>=r.y&&t<=r.y+r.height}getBounds(){const[n,t]=this.element.pRealSize.split(",").map(Number);return{x:this.element.pStart.X,y:this.element.pStart.Y,width:n,height:t}}translate(n,t){this.element.pStart.X+=n,this.element.pStart.Y+=t}}class ba{constructor(n){this.element=n}draw(n){const[t,i]=this.element.pRealSize.split(",").map(Number);n.beginPath();const a=this.element.pStart.X+t/2,r=this.element.pStart.Y+i/2;n.ellipse(a,r,t/2,i/2,0,0,2*Math.PI),this.element.DrawFilled&&(n.fillStyle=this.element.TC_COLOR||"#fff",n.fill()),n.strokeStyle=this.element.HB_COLOR||"#000",n.lineWidth=this.element.HB_SIZE||1,n.stroke()}containsPoint(n,t){const[i,a]=this.element.pRealSize.split(",").map(Number),r=this.element.pStart.X+i/2,o=this.element.pStart.Y+a/2,s=n-r,h=t-o,l=i/2,f=a/2;return Math.pow(s/l,2)+Math.pow(h/f,2)<=1}getBounds(){const[n,t]=this.element.pRealSize.split(",").map(Number);return{x:this.element.pStart.X,y:this.element.pStart.Y,width:n,height:t}}translate(n,t){this.element.pStart.X+=n,this.element.pStart.Y+=t}}class wa{constructor(n){this.element=n}draw(n){if(!this.element.pStart||!this.element.pEnd){console.error("DrawLine: pStart or pEnd is missing",this.element);return}n.beginPath(),n.moveTo(this.element.pStart.X,this.element.pStart.Y),n.lineTo(this.element.pEnd.X,this.element.pEnd.Y),n.strokeStyle=this.element.HB_COLOR||"#fff",n.lineWidth=this.element.HB_SIZE||1,this.element.ISDash&&n.setLineDash([5,5]),n.stroke()}getBounds(){return!this.element.pStart||!this.element.pEnd?(console.error("DrawLine: pStart or pEnd is missing",this.element),{x:0,y:0,width:0,height:0}):{x:Math.min(this.element.pStart.X,this.element.pEnd.X),y:Math.min(this.element.pStart.Y,this.element.pEnd.Y),width:Math.abs(this.element.pStart.X-this.element.pEnd.X),height:Math.abs(this.element.pStart.Y-this.element.pEnd.Y)}}translate(n,t){if(!this.element.pStart||!this.element.pEnd){console.error("DrawLine: pStart or pEnd is missing",this.element);return}this.element.pStart.X+=n,this.element.pStart.Y+=t,this.element.pEnd.X+=n,this.element.pEnd.Y+=t}}class Ea{constructor(n,t){this.element=n,this.ctx=t}draw(){const n=this.element.HB_SIZE&&this.element.HB_SIZE>=12?this.element.HB_SIZE:18;this.ctx.font=`${n}px serif`,this.ctx.fillStyle=this.element.HB_COLOR||"#fff",this.ctx.textBaseline="top",this.ctx.fillText(this.element.str||"",this.element.pStart.X,this.element.pStart.Y);const t=this.ctx.measureText(this.element.str||"").width,i=n;new Path2D().rect(this.element.pStart.X,this.element.pStart.Y-i,t,i)}getBounds(){const n=this.measureTextWidth(this.element.str||""),t=this.element.HB_SIZE&&this.element.HB_SIZE>=12?this.element.HB_SIZE:18;return{x:this.element.pStart.X,y:this.element.pStart.Y-t,width:n,height:t}}translate(n,t){this.element.pStart.X+=n,this.element.pStart.Y+=t}measureTextWidth(n){const t=this.element.HB_SIZE&&this.element.HB_SIZE>=12?this.element.HB_SIZE:18;return this.ctx.font=`${t}px serif`,this.ctx.measureText(n).width}}function Zt(e,n){switch(e.Type){case"DrawRectangle":return new va(e);case"DrawEllipse":return new ba(e);case"DrawLine":return new wa(e);case"DrawText":if(!n)throw new Error("No canvas context provided for DrawText");return new Ea(e,n);default:throw new Error(`Unsupported element type: ${e.Type}`)}}/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */const ma=4,mn=0,xn=1,xa=2;function He(e){let n=e.length;for(;--n>=0;)e[n]=0}const ya=0,ci=1,Sa=2,ka=3,Ta=258,hn=29,ht=256,it=ht+1+hn,Ce=30,dn=19,hi=2*it+1,De=15,Pt=16,Ia=7,un=256,di=16,ui=17,_i=18,en=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),yt=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Da=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),pi=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),La=512,ue=new Array((it+2)*2);He(ue);const et=new Array(Ce*2);He(et);const at=new Array(La);He(at);const rt=new Array(Ta-ka+1);He(rt);const _n=new Array(hn);He(_n);const St=new Array(Ce);He(St);function Bt(e,n,t,i,a){this.static_tree=e,this.extra_bits=n,this.extra_base=t,this.elems=i,this.max_length=a,this.has_stree=e&&e.length}let gi,vi,bi;function Ut(e,n){this.dyn_tree=e,this.max_code=0,this.stat_desc=n}const wi=e=>e<256?at[e]:at[256+(e>>>7)],lt=(e,n)=>{e.pending_buf[e.pending++]=n&255,e.pending_buf[e.pending++]=n>>>8&255},ee=(e,n,t)=>{e.bi_valid>Pt-t?(e.bi_buf|=n<<e.bi_valid&65535,lt(e,e.bi_buf),e.bi_buf=n>>Pt-e.bi_valid,e.bi_valid+=t-Pt):(e.bi_buf|=n<<e.bi_valid&65535,e.bi_valid+=t)},oe=(e,n,t)=>{ee(e,t[n*2],t[n*2+1])},Ei=(e,n)=>{let t=0;do t|=e&1,e>>>=1,t<<=1;while(--n>0);return t>>>1},Na=e=>{e.bi_valid===16?(lt(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)},Aa=(e,n)=>{const t=n.dyn_tree,i=n.max_code,a=n.stat_desc.static_tree,r=n.stat_desc.has_stree,o=n.stat_desc.extra_bits,s=n.stat_desc.extra_base,h=n.stat_desc.max_length;let l,f,A,p,c,m,Z=0;for(p=0;p<=De;p++)e.bl_count[p]=0;for(t[e.heap[e.heap_max]*2+1]=0,l=e.heap_max+1;l<hi;l++)f=e.heap[l],p=t[t[f*2+1]*2+1]+1,p>h&&(p=h,Z++),t[f*2+1]=p,!(f>i)&&(e.bl_count[p]++,c=0,f>=s&&(c=o[f-s]),m=t[f*2],e.opt_len+=m*(p+c),r&&(e.static_len+=m*(a[f*2+1]+c)));if(Z!==0){do{for(p=h-1;e.bl_count[p]===0;)p--;e.bl_count[p]--,e.bl_count[p+1]+=2,e.bl_count[h]--,Z-=2}while(Z>0);for(p=h;p!==0;p--)for(f=e.bl_count[p];f!==0;)A=e.heap[--l],!(A>i)&&(t[A*2+1]!==p&&(e.opt_len+=(p-t[A*2+1])*t[A*2],t[A*2+1]=p),f--)}},mi=(e,n,t)=>{const i=new Array(De+1);let a=0,r,o;for(r=1;r<=De;r++)a=a+t[r-1]<<1,i[r]=a;for(o=0;o<=n;o++){let s=e[o*2+1];s!==0&&(e[o*2]=Ei(i[s]++,s))}},Oa=()=>{let e,n,t,i,a;const r=new Array(De+1);for(t=0,i=0;i<hn-1;i++)for(_n[i]=t,e=0;e<1<<en[i];e++)rt[t++]=i;for(rt[t-1]=i,a=0,i=0;i<16;i++)for(St[i]=a,e=0;e<1<<yt[i];e++)at[a++]=i;for(a>>=7;i<Ce;i++)for(St[i]=a<<7,e=0;e<1<<yt[i]-7;e++)at[256+a++]=i;for(n=0;n<=De;n++)r[n]=0;for(e=0;e<=143;)ue[e*2+1]=8,e++,r[8]++;for(;e<=255;)ue[e*2+1]=9,e++,r[9]++;for(;e<=279;)ue[e*2+1]=7,e++,r[7]++;for(;e<=287;)ue[e*2+1]=8,e++,r[8]++;for(mi(ue,it+1,r),e=0;e<Ce;e++)et[e*2+1]=5,et[e*2]=Ei(e,5);gi=new Bt(ue,en,ht+1,it,De),vi=new Bt(et,yt,0,Ce,De),bi=new Bt(new Array(0),Da,0,dn,Ia)},xi=e=>{let n;for(n=0;n<it;n++)e.dyn_ltree[n*2]=0;for(n=0;n<Ce;n++)e.dyn_dtree[n*2]=0;for(n=0;n<dn;n++)e.bl_tree[n*2]=0;e.dyn_ltree[un*2]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},yi=e=>{e.bi_valid>8?lt(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},yn=(e,n,t,i)=>{const a=n*2,r=t*2;return e[a]<e[r]||e[a]===e[r]&&i[n]<=i[t]},Ht=(e,n,t)=>{const i=e.heap[t];let a=t<<1;for(;a<=e.heap_len&&(a<e.heap_len&&yn(n,e.heap[a+1],e.heap[a],e.depth)&&a++,!yn(n,i,e.heap[a],e.depth));)e.heap[t]=e.heap[a],t=a,a<<=1;e.heap[t]=i},Sn=(e,n,t)=>{let i,a,r=0,o,s;if(e.sym_next!==0)do i=e.pending_buf[e.sym_buf+r++]&255,i+=(e.pending_buf[e.sym_buf+r++]&255)<<8,a=e.pending_buf[e.sym_buf+r++],i===0?oe(e,a,n):(o=rt[a],oe(e,o+ht+1,n),s=en[o],s!==0&&(a-=_n[o],ee(e,a,s)),i--,o=wi(i),oe(e,o,t),s=yt[o],s!==0&&(i-=St[o],ee(e,i,s)));while(r<e.sym_next);oe(e,un,n)},tn=(e,n)=>{const t=n.dyn_tree,i=n.stat_desc.static_tree,a=n.stat_desc.has_stree,r=n.stat_desc.elems;let o,s,h=-1,l;for(e.heap_len=0,e.heap_max=hi,o=0;o<r;o++)t[o*2]!==0?(e.heap[++e.heap_len]=h=o,e.depth[o]=0):t[o*2+1]=0;for(;e.heap_len<2;)l=e.heap[++e.heap_len]=h<2?++h:0,t[l*2]=1,e.depth[l]=0,e.opt_len--,a&&(e.static_len-=i[l*2+1]);for(n.max_code=h,o=e.heap_len>>1;o>=1;o--)Ht(e,t,o);l=r;do o=e.heap[1],e.heap[1]=e.heap[e.heap_len--],Ht(e,t,1),s=e.heap[1],e.heap[--e.heap_max]=o,e.heap[--e.heap_max]=s,t[l*2]=t[o*2]+t[s*2],e.depth[l]=(e.depth[o]>=e.depth[s]?e.depth[o]:e.depth[s])+1,t[o*2+1]=t[s*2+1]=l,e.heap[1]=l++,Ht(e,t,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],Aa(e,n),mi(t,h,e.bl_count)},kn=(e,n,t)=>{let i,a=-1,r,o=n[0*2+1],s=0,h=7,l=4;for(o===0&&(h=138,l=3),n[(t+1)*2+1]=65535,i=0;i<=t;i++)r=o,o=n[(i+1)*2+1],!(++s<h&&r===o)&&(s<l?e.bl_tree[r*2]+=s:r!==0?(r!==a&&e.bl_tree[r*2]++,e.bl_tree[di*2]++):s<=10?e.bl_tree[ui*2]++:e.bl_tree[_i*2]++,s=0,a=r,o===0?(h=138,l=3):r===o?(h=6,l=3):(h=7,l=4))},Tn=(e,n,t)=>{let i,a=-1,r,o=n[0*2+1],s=0,h=7,l=4;for(o===0&&(h=138,l=3),i=0;i<=t;i++)if(r=o,o=n[(i+1)*2+1],!(++s<h&&r===o)){if(s<l)do oe(e,r,e.bl_tree);while(--s!==0);else r!==0?(r!==a&&(oe(e,r,e.bl_tree),s--),oe(e,di,e.bl_tree),ee(e,s-3,2)):s<=10?(oe(e,ui,e.bl_tree),ee(e,s-3,3)):(oe(e,_i,e.bl_tree),ee(e,s-11,7));s=0,a=r,o===0?(h=138,l=3):r===o?(h=6,l=3):(h=7,l=4)}},Ra=e=>{let n;for(kn(e,e.dyn_ltree,e.l_desc.max_code),kn(e,e.dyn_dtree,e.d_desc.max_code),tn(e,e.bl_desc),n=dn-1;n>=3&&e.bl_tree[pi[n]*2+1]===0;n--);return e.opt_len+=3*(n+1)+5+5+4,n},za=(e,n,t,i)=>{let a;for(ee(e,n-257,5),ee(e,t-1,5),ee(e,i-4,4),a=0;a<i;a++)ee(e,e.bl_tree[pi[a]*2+1],3);Tn(e,e.dyn_ltree,n-1),Tn(e,e.dyn_dtree,t-1)},Ma=e=>{let n=4093624447,t;for(t=0;t<=31;t++,n>>>=1)if(n&1&&e.dyn_ltree[t*2]!==0)return mn;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return xn;for(t=32;t<ht;t++)if(e.dyn_ltree[t*2]!==0)return xn;return mn};let In=!1;const Fa=e=>{In||(Oa(),In=!0),e.l_desc=new Ut(e.dyn_ltree,gi),e.d_desc=new Ut(e.dyn_dtree,vi),e.bl_desc=new Ut(e.bl_tree,bi),e.bi_buf=0,e.bi_valid=0,xi(e)},Si=(e,n,t,i)=>{ee(e,(ya<<1)+(i?1:0),3),yi(e),lt(e,t),lt(e,~t),t&&e.pending_buf.set(e.window.subarray(n,n+t),e.pending),e.pending+=t},Ca=e=>{ee(e,ci<<1,3),oe(e,un,ue),Na(e)},Za=(e,n,t,i)=>{let a,r,o=0;e.level>0?(e.strm.data_type===xa&&(e.strm.data_type=Ma(e)),tn(e,e.l_desc),tn(e,e.d_desc),o=Ra(e),a=e.opt_len+3+7>>>3,r=e.static_len+3+7>>>3,r<=a&&(a=r)):a=r=t+5,t+4<=a&&n!==-1?Si(e,n,t,i):e.strategy===ma||r===a?(ee(e,(ci<<1)+(i?1:0),3),Sn(e,ue,et)):(ee(e,(Sa<<1)+(i?1:0),3),za(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),Sn(e,e.dyn_ltree,e.dyn_dtree)),xi(e),i&&yi(e)},Pa=(e,n,t)=>(e.pending_buf[e.sym_buf+e.sym_next++]=n,e.pending_buf[e.sym_buf+e.sym_next++]=n>>8,e.pending_buf[e.sym_buf+e.sym_next++]=t,n===0?e.dyn_ltree[t*2]++:(e.matches++,n--,e.dyn_ltree[(rt[t]+ht+1)*2]++,e.dyn_dtree[wi(n)*2]++),e.sym_next===e.sym_end);var Ba=Fa,Ua=Si,Ha=Za,$a=Pa,Ya=Ca,Ga={_tr_init:Ba,_tr_stored_block:Ua,_tr_flush_block:Ha,_tr_tally:$a,_tr_align:Ya};const Xa=(e,n,t,i)=>{let a=e&65535|0,r=e>>>16&65535|0,o=0;for(;t!==0;){o=t>2e3?2e3:t,t-=o;do a=a+n[i++]|0,r=r+a|0;while(--o);a%=65521,r%=65521}return a|r<<16|0};var ot=Xa;const Va=()=>{let e,n=[];for(var t=0;t<256;t++){e=t;for(var i=0;i<8;i++)e=e&1?3988292384^e>>>1:e>>>1;n[t]=e}return n},Ka=new Uint32Array(Va()),ja=(e,n,t,i)=>{const a=Ka,r=i+t;e^=-1;for(let o=i;o<r;o++)e=e>>>8^a[(e^n[o])&255];return e^-1};var Y=ja,Ze={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},dt={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:Wa,_tr_stored_block:nn,_tr_flush_block:Ja,_tr_tally:me,_tr_align:qa}=Ga,{Z_NO_FLUSH:xe,Z_PARTIAL_FLUSH:Qa,Z_FULL_FLUSH:er,Z_FINISH:ie,Z_BLOCK:Dn,Z_OK:G,Z_STREAM_END:Ln,Z_STREAM_ERROR:se,Z_DATA_ERROR:tr,Z_BUF_ERROR:$t,Z_DEFAULT_COMPRESSION:nr,Z_FILTERED:ir,Z_HUFFMAN_ONLY:vt,Z_RLE:ar,Z_FIXED:rr,Z_DEFAULT_STRATEGY:lr,Z_UNKNOWN:or,Z_DEFLATED:Lt}=dt,sr=9,fr=15,cr=8,hr=29,dr=256,an=dr+1+hr,ur=30,_r=19,pr=2*an+1,gr=15,M=3,Ee=258,fe=Ee+M+1,vr=32,Pe=42,pn=57,rn=69,ln=73,on=91,sn=103,Le=113,qe=666,J=1,$e=2,Ae=3,Ye=4,br=3,Ne=(e,n)=>(e.msg=Ze[n],n),Nn=e=>e*2-(e>4?9:0),we=e=>{let n=e.length;for(;--n>=0;)e[n]=0},wr=e=>{let n,t,i,a=e.w_size;n=e.hash_size,i=n;do t=e.head[--i],e.head[i]=t>=a?t-a:0;while(--n);n=a,i=n;do t=e.prev[--i],e.prev[i]=t>=a?t-a:0;while(--n)};let Er=(e,n,t)=>(n<<e.hash_shift^t)&e.hash_mask,ye=Er;const te=e=>{const n=e.state;let t=n.pending;t>e.avail_out&&(t=e.avail_out),t!==0&&(e.output.set(n.pending_buf.subarray(n.pending_out,n.pending_out+t),e.next_out),e.next_out+=t,n.pending_out+=t,e.total_out+=t,e.avail_out-=t,n.pending-=t,n.pending===0&&(n.pending_out=0))},ne=(e,n)=>{Ja(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,n),e.block_start=e.strstart,te(e.strm)},F=(e,n)=>{e.pending_buf[e.pending++]=n},We=(e,n)=>{e.pending_buf[e.pending++]=n>>>8&255,e.pending_buf[e.pending++]=n&255},fn=(e,n,t,i)=>{let a=e.avail_in;return a>i&&(a=i),a===0?0:(e.avail_in-=a,n.set(e.input.subarray(e.next_in,e.next_in+a),t),e.state.wrap===1?e.adler=ot(e.adler,n,a,t):e.state.wrap===2&&(e.adler=Y(e.adler,n,a,t)),e.next_in+=a,e.total_in+=a,a)},ki=(e,n)=>{let t=e.max_chain_length,i=e.strstart,a,r,o=e.prev_length,s=e.nice_match;const h=e.strstart>e.w_size-fe?e.strstart-(e.w_size-fe):0,l=e.window,f=e.w_mask,A=e.prev,p=e.strstart+Ee;let c=l[i+o-1],m=l[i+o];e.prev_length>=e.good_match&&(t>>=2),s>e.lookahead&&(s=e.lookahead);do if(a=n,!(l[a+o]!==m||l[a+o-1]!==c||l[a]!==l[i]||l[++a]!==l[i+1])){i+=2,a++;do;while(l[++i]===l[++a]&&l[++i]===l[++a]&&l[++i]===l[++a]&&l[++i]===l[++a]&&l[++i]===l[++a]&&l[++i]===l[++a]&&l[++i]===l[++a]&&l[++i]===l[++a]&&i<p);if(r=Ee-(p-i),i=p-Ee,r>o){if(e.match_start=n,o=r,r>=s)break;c=l[i+o-1],m=l[i+o]}}while((n=A[n&f])>h&&--t!==0);return o<=e.lookahead?o:e.lookahead},Be=e=>{const n=e.w_size;let t,i,a;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=n+(n-fe)&&(e.window.set(e.window.subarray(n,n+n-i),0),e.match_start-=n,e.strstart-=n,e.block_start-=n,e.insert>e.strstart&&(e.insert=e.strstart),wr(e),i+=n),e.strm.avail_in===0)break;if(t=fn(e.strm,e.window,e.strstart+e.lookahead,i),e.lookahead+=t,e.lookahead+e.insert>=M)for(a=e.strstart-e.insert,e.ins_h=e.window[a],e.ins_h=ye(e,e.ins_h,e.window[a+1]);e.insert&&(e.ins_h=ye(e,e.ins_h,e.window[a+M-1]),e.prev[a&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=a,a++,e.insert--,!(e.lookahead+e.insert<M)););}while(e.lookahead<fe&&e.strm.avail_in!==0)},Ti=(e,n)=>{let t=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,i,a,r,o=0,s=e.strm.avail_in;do{if(i=65535,r=e.bi_valid+42>>3,e.strm.avail_out<r||(r=e.strm.avail_out-r,a=e.strstart-e.block_start,i>a+e.strm.avail_in&&(i=a+e.strm.avail_in),i>r&&(i=r),i<t&&(i===0&&n!==ie||n===xe||i!==a+e.strm.avail_in)))break;o=n===ie&&i===a+e.strm.avail_in?1:0,nn(e,0,0,o),e.pending_buf[e.pending-4]=i,e.pending_buf[e.pending-3]=i>>8,e.pending_buf[e.pending-2]=~i,e.pending_buf[e.pending-1]=~i>>8,te(e.strm),a&&(a>i&&(a=i),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+a),e.strm.next_out),e.strm.next_out+=a,e.strm.avail_out-=a,e.strm.total_out+=a,e.block_start+=a,i-=a),i&&(fn(e.strm,e.strm.output,e.strm.next_out,i),e.strm.next_out+=i,e.strm.avail_out-=i,e.strm.total_out+=i)}while(o===0);return s-=e.strm.avail_in,s&&(s>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=s&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-s,e.strm.next_in),e.strstart),e.strstart+=s,e.insert+=s>e.w_size-e.insert?e.w_size-e.insert:s),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),o?Ye:n!==xe&&n!==ie&&e.strm.avail_in===0&&e.strstart===e.block_start?$e:(r=e.window_size-e.strstart,e.strm.avail_in>r&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,r+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),r>e.strm.avail_in&&(r=e.strm.avail_in),r&&(fn(e.strm,e.window,e.strstart,r),e.strstart+=r,e.insert+=r>e.w_size-e.insert?e.w_size-e.insert:r),e.high_water<e.strstart&&(e.high_water=e.strstart),r=e.bi_valid+42>>3,r=e.pending_buf_size-r>65535?65535:e.pending_buf_size-r,t=r>e.w_size?e.w_size:r,a=e.strstart-e.block_start,(a>=t||(a||n===ie)&&n!==xe&&e.strm.avail_in===0&&a<=r)&&(i=a>r?r:a,o=n===ie&&e.strm.avail_in===0&&i===a?1:0,nn(e,e.block_start,i,o),e.block_start+=i,te(e.strm)),o?Ae:J)},Yt=(e,n)=>{let t,i;for(;;){if(e.lookahead<fe){if(Be(e),e.lookahead<fe&&n===xe)return J;if(e.lookahead===0)break}if(t=0,e.lookahead>=M&&(e.ins_h=ye(e,e.ins_h,e.window[e.strstart+M-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),t!==0&&e.strstart-t<=e.w_size-fe&&(e.match_length=ki(e,t)),e.match_length>=M)if(i=me(e,e.strstart-e.match_start,e.match_length-M),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=M){e.match_length--;do e.strstart++,e.ins_h=ye(e,e.ins_h,e.window[e.strstart+M-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=ye(e,e.ins_h,e.window[e.strstart+1]);else i=me(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(i&&(ne(e,!1),e.strm.avail_out===0))return J}return e.insert=e.strstart<M-1?e.strstart:M-1,n===ie?(ne(e,!0),e.strm.avail_out===0?Ae:Ye):e.sym_next&&(ne(e,!1),e.strm.avail_out===0)?J:$e},Me=(e,n)=>{let t,i,a;for(;;){if(e.lookahead<fe){if(Be(e),e.lookahead<fe&&n===xe)return J;if(e.lookahead===0)break}if(t=0,e.lookahead>=M&&(e.ins_h=ye(e,e.ins_h,e.window[e.strstart+M-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=M-1,t!==0&&e.prev_length<e.max_lazy_match&&e.strstart-t<=e.w_size-fe&&(e.match_length=ki(e,t),e.match_length<=5&&(e.strategy===ir||e.match_length===M&&e.strstart-e.match_start>4096)&&(e.match_length=M-1)),e.prev_length>=M&&e.match_length<=e.prev_length){a=e.strstart+e.lookahead-M,i=me(e,e.strstart-1-e.prev_match,e.prev_length-M),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=a&&(e.ins_h=ye(e,e.ins_h,e.window[e.strstart+M-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=M-1,e.strstart++,i&&(ne(e,!1),e.strm.avail_out===0))return J}else if(e.match_available){if(i=me(e,0,e.window[e.strstart-1]),i&&ne(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return J}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(i=me(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<M-1?e.strstart:M-1,n===ie?(ne(e,!0),e.strm.avail_out===0?Ae:Ye):e.sym_next&&(ne(e,!1),e.strm.avail_out===0)?J:$e},mr=(e,n)=>{let t,i,a,r;const o=e.window;for(;;){if(e.lookahead<=Ee){if(Be(e),e.lookahead<=Ee&&n===xe)return J;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=M&&e.strstart>0&&(a=e.strstart-1,i=o[a],i===o[++a]&&i===o[++a]&&i===o[++a])){r=e.strstart+Ee;do;while(i===o[++a]&&i===o[++a]&&i===o[++a]&&i===o[++a]&&i===o[++a]&&i===o[++a]&&i===o[++a]&&i===o[++a]&&a<r);e.match_length=Ee-(r-a),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=M?(t=me(e,1,e.match_length-M),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(t=me(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),t&&(ne(e,!1),e.strm.avail_out===0))return J}return e.insert=0,n===ie?(ne(e,!0),e.strm.avail_out===0?Ae:Ye):e.sym_next&&(ne(e,!1),e.strm.avail_out===0)?J:$e},xr=(e,n)=>{let t;for(;;){if(e.lookahead===0&&(Be(e),e.lookahead===0)){if(n===xe)return J;break}if(e.match_length=0,t=me(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,t&&(ne(e,!1),e.strm.avail_out===0))return J}return e.insert=0,n===ie?(ne(e,!0),e.strm.avail_out===0?Ae:Ye):e.sym_next&&(ne(e,!1),e.strm.avail_out===0)?J:$e};function re(e,n,t,i,a){this.good_length=e,this.max_lazy=n,this.nice_length=t,this.max_chain=i,this.func=a}const Qe=[new re(0,0,0,0,Ti),new re(4,4,8,4,Yt),new re(4,5,16,8,Yt),new re(4,6,32,32,Yt),new re(4,4,16,16,Me),new re(8,16,32,32,Me),new re(8,16,128,128,Me),new re(8,32,128,256,Me),new re(32,128,258,1024,Me),new re(32,258,258,4096,Me)],yr=e=>{e.window_size=2*e.w_size,we(e.head),e.max_lazy_match=Qe[e.level].max_lazy,e.good_match=Qe[e.level].good_length,e.nice_match=Qe[e.level].nice_length,e.max_chain_length=Qe[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=M-1,e.match_available=0,e.ins_h=0};function Sr(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Lt,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(pr*2),this.dyn_dtree=new Uint16Array((2*ur+1)*2),this.bl_tree=new Uint16Array((2*_r+1)*2),we(this.dyn_ltree),we(this.dyn_dtree),we(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(gr+1),this.heap=new Uint16Array(2*an+1),we(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*an+1),we(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const ut=e=>{if(!e)return 1;const n=e.state;return!n||n.strm!==e||n.status!==Pe&&n.status!==pn&&n.status!==rn&&n.status!==ln&&n.status!==on&&n.status!==sn&&n.status!==Le&&n.status!==qe?1:0},Ii=e=>{if(ut(e))return Ne(e,se);e.total_in=e.total_out=0,e.data_type=or;const n=e.state;return n.pending=0,n.pending_out=0,n.wrap<0&&(n.wrap=-n.wrap),n.status=n.wrap===2?pn:n.wrap?Pe:Le,e.adler=n.wrap===2?0:1,n.last_flush=-2,Wa(n),G},Di=e=>{const n=Ii(e);return n===G&&yr(e.state),n},kr=(e,n)=>ut(e)||e.state.wrap!==2?se:(e.state.gzhead=n,G),Li=(e,n,t,i,a,r)=>{if(!e)return se;let o=1;if(n===nr&&(n=6),i<0?(o=0,i=-i):i>15&&(o=2,i-=16),a<1||a>sr||t!==Lt||i<8||i>15||n<0||n>9||r<0||r>rr||i===8&&o!==1)return Ne(e,se);i===8&&(i=9);const s=new Sr;return e.state=s,s.strm=e,s.status=Pe,s.wrap=o,s.gzhead=null,s.w_bits=i,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=a+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+M-1)/M),s.window=new Uint8Array(s.w_size*2),s.head=new Uint16Array(s.hash_size),s.prev=new Uint16Array(s.w_size),s.lit_bufsize=1<<a+6,s.pending_buf_size=s.lit_bufsize*4,s.pending_buf=new Uint8Array(s.pending_buf_size),s.sym_buf=s.lit_bufsize,s.sym_end=(s.lit_bufsize-1)*3,s.level=n,s.strategy=r,s.method=t,Di(e)},Tr=(e,n)=>Li(e,n,Lt,fr,cr,lr),Ir=(e,n)=>{if(ut(e)||n>Dn||n<0)return e?Ne(e,se):se;const t=e.state;if(!e.output||e.avail_in!==0&&!e.input||t.status===qe&&n!==ie)return Ne(e,e.avail_out===0?$t:se);const i=t.last_flush;if(t.last_flush=n,t.pending!==0){if(te(e),e.avail_out===0)return t.last_flush=-1,G}else if(e.avail_in===0&&Nn(n)<=Nn(i)&&n!==ie)return Ne(e,$t);if(t.status===qe&&e.avail_in!==0)return Ne(e,$t);if(t.status===Pe&&t.wrap===0&&(t.status=Le),t.status===Pe){let a=Lt+(t.w_bits-8<<4)<<8,r=-1;if(t.strategy>=vt||t.level<2?r=0:t.level<6?r=1:t.level===6?r=2:r=3,a|=r<<6,t.strstart!==0&&(a|=vr),a+=31-a%31,We(t,a),t.strstart!==0&&(We(t,e.adler>>>16),We(t,e.adler&65535)),e.adler=1,t.status=Le,te(e),t.pending!==0)return t.last_flush=-1,G}if(t.status===pn){if(e.adler=0,F(t,31),F(t,139),F(t,8),t.gzhead)F(t,(t.gzhead.text?1:0)+(t.gzhead.hcrc?2:0)+(t.gzhead.extra?4:0)+(t.gzhead.name?8:0)+(t.gzhead.comment?16:0)),F(t,t.gzhead.time&255),F(t,t.gzhead.time>>8&255),F(t,t.gzhead.time>>16&255),F(t,t.gzhead.time>>24&255),F(t,t.level===9?2:t.strategy>=vt||t.level<2?4:0),F(t,t.gzhead.os&255),t.gzhead.extra&&t.gzhead.extra.length&&(F(t,t.gzhead.extra.length&255),F(t,t.gzhead.extra.length>>8&255)),t.gzhead.hcrc&&(e.adler=Y(e.adler,t.pending_buf,t.pending,0)),t.gzindex=0,t.status=rn;else if(F(t,0),F(t,0),F(t,0),F(t,0),F(t,0),F(t,t.level===9?2:t.strategy>=vt||t.level<2?4:0),F(t,br),t.status=Le,te(e),t.pending!==0)return t.last_flush=-1,G}if(t.status===rn){if(t.gzhead.extra){let a=t.pending,r=(t.gzhead.extra.length&65535)-t.gzindex;for(;t.pending+r>t.pending_buf_size;){let s=t.pending_buf_size-t.pending;if(t.pending_buf.set(t.gzhead.extra.subarray(t.gzindex,t.gzindex+s),t.pending),t.pending=t.pending_buf_size,t.gzhead.hcrc&&t.pending>a&&(e.adler=Y(e.adler,t.pending_buf,t.pending-a,a)),t.gzindex+=s,te(e),t.pending!==0)return t.last_flush=-1,G;a=0,r-=s}let o=new Uint8Array(t.gzhead.extra);t.pending_buf.set(o.subarray(t.gzindex,t.gzindex+r),t.pending),t.pending+=r,t.gzhead.hcrc&&t.pending>a&&(e.adler=Y(e.adler,t.pending_buf,t.pending-a,a)),t.gzindex=0}t.status=ln}if(t.status===ln){if(t.gzhead.name){let a=t.pending,r;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>a&&(e.adler=Y(e.adler,t.pending_buf,t.pending-a,a)),te(e),t.pending!==0)return t.last_flush=-1,G;a=0}t.gzindex<t.gzhead.name.length?r=t.gzhead.name.charCodeAt(t.gzindex++)&255:r=0,F(t,r)}while(r!==0);t.gzhead.hcrc&&t.pending>a&&(e.adler=Y(e.adler,t.pending_buf,t.pending-a,a)),t.gzindex=0}t.status=on}if(t.status===on){if(t.gzhead.comment){let a=t.pending,r;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>a&&(e.adler=Y(e.adler,t.pending_buf,t.pending-a,a)),te(e),t.pending!==0)return t.last_flush=-1,G;a=0}t.gzindex<t.gzhead.comment.length?r=t.gzhead.comment.charCodeAt(t.gzindex++)&255:r=0,F(t,r)}while(r!==0);t.gzhead.hcrc&&t.pending>a&&(e.adler=Y(e.adler,t.pending_buf,t.pending-a,a))}t.status=sn}if(t.status===sn){if(t.gzhead.hcrc){if(t.pending+2>t.pending_buf_size&&(te(e),t.pending!==0))return t.last_flush=-1,G;F(t,e.adler&255),F(t,e.adler>>8&255),e.adler=0}if(t.status=Le,te(e),t.pending!==0)return t.last_flush=-1,G}if(e.avail_in!==0||t.lookahead!==0||n!==xe&&t.status!==qe){let a=t.level===0?Ti(t,n):t.strategy===vt?xr(t,n):t.strategy===ar?mr(t,n):Qe[t.level].func(t,n);if((a===Ae||a===Ye)&&(t.status=qe),a===J||a===Ae)return e.avail_out===0&&(t.last_flush=-1),G;if(a===$e&&(n===Qa?qa(t):n!==Dn&&(nn(t,0,0,!1),n===er&&(we(t.head),t.lookahead===0&&(t.strstart=0,t.block_start=0,t.insert=0))),te(e),e.avail_out===0))return t.last_flush=-1,G}return n!==ie?G:t.wrap<=0?Ln:(t.wrap===2?(F(t,e.adler&255),F(t,e.adler>>8&255),F(t,e.adler>>16&255),F(t,e.adler>>24&255),F(t,e.total_in&255),F(t,e.total_in>>8&255),F(t,e.total_in>>16&255),F(t,e.total_in>>24&255)):(We(t,e.adler>>>16),We(t,e.adler&65535)),te(e),t.wrap>0&&(t.wrap=-t.wrap),t.pending!==0?G:Ln)},Dr=e=>{if(ut(e))return se;const n=e.state.status;return e.state=null,n===Le?Ne(e,tr):G},Lr=(e,n)=>{let t=n.length;if(ut(e))return se;const i=e.state,a=i.wrap;if(a===2||a===1&&i.status!==Pe||i.lookahead)return se;if(a===1&&(e.adler=ot(e.adler,n,t,0)),i.wrap=0,t>=i.w_size){a===0&&(we(i.head),i.strstart=0,i.block_start=0,i.insert=0);let h=new Uint8Array(i.w_size);h.set(n.subarray(t-i.w_size,t),0),n=h,t=i.w_size}const r=e.avail_in,o=e.next_in,s=e.input;for(e.avail_in=t,e.next_in=0,e.input=n,Be(i);i.lookahead>=M;){let h=i.strstart,l=i.lookahead-(M-1);do i.ins_h=ye(i,i.ins_h,i.window[h+M-1]),i.prev[h&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=h,h++;while(--l);i.strstart=h,i.lookahead=M-1,Be(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=M-1,i.match_available=0,e.next_in=o,e.input=s,e.avail_in=r,i.wrap=a,G};var Nr=Tr,Ar=Li,Or=Di,Rr=Ii,zr=kr,Mr=Ir,Fr=Dr,Cr=Lr,Zr="pako deflate (from Nodeca project)",tt={deflateInit:Nr,deflateInit2:Ar,deflateReset:Or,deflateResetKeep:Rr,deflateSetHeader:zr,deflate:Mr,deflateEnd:Fr,deflateSetDictionary:Cr,deflateInfo:Zr};const Pr=(e,n)=>Object.prototype.hasOwnProperty.call(e,n);var Br=function(e){const n=Array.prototype.slice.call(arguments,1);for(;n.length;){const t=n.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(const i in t)Pr(t,i)&&(e[i]=t[i])}}return e},Ur=e=>{let n=0;for(let i=0,a=e.length;i<a;i++)n+=e[i].length;const t=new Uint8Array(n);for(let i=0,a=0,r=e.length;i<r;i++){let o=e[i];t.set(o,a),a+=o.length}return t},Nt={assign:Br,flattenChunks:Ur};let Ni=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Ni=!1}const st=new Uint8Array(256);for(let e=0;e<256;e++)st[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;st[254]=st[254]=1;var Hr=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let n,t,i,a,r,o=e.length,s=0;for(a=0;a<o;a++)t=e.charCodeAt(a),(t&64512)===55296&&a+1<o&&(i=e.charCodeAt(a+1),(i&64512)===56320&&(t=65536+(t-55296<<10)+(i-56320),a++)),s+=t<128?1:t<2048?2:t<65536?3:4;for(n=new Uint8Array(s),r=0,a=0;r<s;a++)t=e.charCodeAt(a),(t&64512)===55296&&a+1<o&&(i=e.charCodeAt(a+1),(i&64512)===56320&&(t=65536+(t-55296<<10)+(i-56320),a++)),t<128?n[r++]=t:t<2048?(n[r++]=192|t>>>6,n[r++]=128|t&63):t<65536?(n[r++]=224|t>>>12,n[r++]=128|t>>>6&63,n[r++]=128|t&63):(n[r++]=240|t>>>18,n[r++]=128|t>>>12&63,n[r++]=128|t>>>6&63,n[r++]=128|t&63);return n};const $r=(e,n)=>{if(n<65534&&e.subarray&&Ni)return String.fromCharCode.apply(null,e.length===n?e:e.subarray(0,n));let t="";for(let i=0;i<n;i++)t+=String.fromCharCode(e[i]);return t};var Yr=(e,n)=>{const t=n||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,n));let i,a;const r=new Array(t*2);for(a=0,i=0;i<t;){let o=e[i++];if(o<128){r[a++]=o;continue}let s=st[o];if(s>4){r[a++]=65533,i+=s-1;continue}for(o&=s===2?31:s===3?15:7;s>1&&i<t;)o=o<<6|e[i++]&63,s--;if(s>1){r[a++]=65533;continue}o<65536?r[a++]=o:(o-=65536,r[a++]=55296|o>>10&1023,r[a++]=56320|o&1023)}return $r(r,a)},Gr=(e,n)=>{n=n||e.length,n>e.length&&(n=e.length);let t=n-1;for(;t>=0&&(e[t]&192)===128;)t--;return t<0||t===0?n:t+st[e[t]]>n?t:n},ft={string2buf:Hr,buf2string:Yr,utf8border:Gr};function Xr(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Ai=Xr;const Oi=Object.prototype.toString,{Z_NO_FLUSH:Vr,Z_SYNC_FLUSH:Kr,Z_FULL_FLUSH:jr,Z_FINISH:Wr,Z_OK:kt,Z_STREAM_END:Jr,Z_DEFAULT_COMPRESSION:qr,Z_DEFAULT_STRATEGY:Qr,Z_DEFLATED:el}=dt;function gn(e){this.options=Nt.assign({level:qr,method:el,chunkSize:16384,windowBits:15,memLevel:8,strategy:Qr},e||{});let n=this.options;n.raw&&n.windowBits>0?n.windowBits=-n.windowBits:n.gzip&&n.windowBits>0&&n.windowBits<16&&(n.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ai,this.strm.avail_out=0;let t=tt.deflateInit2(this.strm,n.level,n.method,n.windowBits,n.memLevel,n.strategy);if(t!==kt)throw new Error(Ze[t]);if(n.header&&tt.deflateSetHeader(this.strm,n.header),n.dictionary){let i;if(typeof n.dictionary=="string"?i=ft.string2buf(n.dictionary):Oi.call(n.dictionary)==="[object ArrayBuffer]"?i=new Uint8Array(n.dictionary):i=n.dictionary,t=tt.deflateSetDictionary(this.strm,i),t!==kt)throw new Error(Ze[t]);this._dict_set=!0}}gn.prototype.push=function(e,n){const t=this.strm,i=this.options.chunkSize;let a,r;if(this.ended)return!1;for(n===~~n?r=n:r=n===!0?Wr:Vr,typeof e=="string"?t.input=ft.string2buf(e):Oi.call(e)==="[object ArrayBuffer]"?t.input=new Uint8Array(e):t.input=e,t.next_in=0,t.avail_in=t.input.length;;){if(t.avail_out===0&&(t.output=new Uint8Array(i),t.next_out=0,t.avail_out=i),(r===Kr||r===jr)&&t.avail_out<=6){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(a=tt.deflate(t,r),a===Jr)return t.next_out>0&&this.onData(t.output.subarray(0,t.next_out)),a=tt.deflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===kt;if(t.avail_out===0){this.onData(t.output);continue}if(r>0&&t.next_out>0){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(t.avail_in===0)break}return!0};gn.prototype.onData=function(e){this.chunks.push(e)};gn.prototype.onEnd=function(e){e===kt&&(this.result=Nt.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};const bt=16209,tl=16191;var nl=function(n,t){let i,a,r,o,s,h,l,f,A,p,c,m,Z,O,L,R,N,d,z,x,g,T,y,b;const S=n.state;i=n.next_in,y=n.input,a=i+(n.avail_in-5),r=n.next_out,b=n.output,o=r-(t-n.avail_out),s=r+(n.avail_out-257),h=S.dmax,l=S.wsize,f=S.whave,A=S.wnext,p=S.window,c=S.hold,m=S.bits,Z=S.lencode,O=S.distcode,L=(1<<S.lenbits)-1,R=(1<<S.distbits)-1;e:do{m<15&&(c+=y[i++]<<m,m+=8,c+=y[i++]<<m,m+=8),N=Z[c&L];t:for(;;){if(d=N>>>24,c>>>=d,m-=d,d=N>>>16&255,d===0)b[r++]=N&65535;else if(d&16){z=N&65535,d&=15,d&&(m<d&&(c+=y[i++]<<m,m+=8),z+=c&(1<<d)-1,c>>>=d,m-=d),m<15&&(c+=y[i++]<<m,m+=8,c+=y[i++]<<m,m+=8),N=O[c&R];n:for(;;){if(d=N>>>24,c>>>=d,m-=d,d=N>>>16&255,d&16){if(x=N&65535,d&=15,m<d&&(c+=y[i++]<<m,m+=8,m<d&&(c+=y[i++]<<m,m+=8)),x+=c&(1<<d)-1,x>h){n.msg="invalid distance too far back",S.mode=bt;break e}if(c>>>=d,m-=d,d=r-o,x>d){if(d=x-d,d>f&&S.sane){n.msg="invalid distance too far back",S.mode=bt;break e}if(g=0,T=p,A===0){if(g+=l-d,d<z){z-=d;do b[r++]=p[g++];while(--d);g=r-x,T=b}}else if(A<d){if(g+=l+A-d,d-=A,d<z){z-=d;do b[r++]=p[g++];while(--d);if(g=0,A<z){d=A,z-=d;do b[r++]=p[g++];while(--d);g=r-x,T=b}}}else if(g+=A-d,d<z){z-=d;do b[r++]=p[g++];while(--d);g=r-x,T=b}for(;z>2;)b[r++]=T[g++],b[r++]=T[g++],b[r++]=T[g++],z-=3;z&&(b[r++]=T[g++],z>1&&(b[r++]=T[g++]))}else{g=r-x;do b[r++]=b[g++],b[r++]=b[g++],b[r++]=b[g++],z-=3;while(z>2);z&&(b[r++]=b[g++],z>1&&(b[r++]=b[g++]))}}else if(d&64){n.msg="invalid distance code",S.mode=bt;break e}else{N=O[(N&65535)+(c&(1<<d)-1)];continue n}break}}else if(d&64)if(d&32){S.mode=tl;break e}else{n.msg="invalid literal/length code",S.mode=bt;break e}else{N=Z[(N&65535)+(c&(1<<d)-1)];continue t}break}}while(i<a&&r<s);z=m>>3,i-=z,m-=z<<3,c&=(1<<m)-1,n.next_in=i,n.next_out=r,n.avail_in=i<a?5+(a-i):5-(i-a),n.avail_out=r<s?257+(s-r):257-(r-s),S.hold=c,S.bits=m};const Fe=15,An=852,On=592,Rn=0,Gt=1,zn=2,il=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),al=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),rl=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),ll=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),ol=(e,n,t,i,a,r,o,s)=>{const h=s.bits;let l=0,f=0,A=0,p=0,c=0,m=0,Z=0,O=0,L=0,R=0,N,d,z,x,g,T=null,y;const b=new Uint16Array(Fe+1),S=new Uint16Array(Fe+1);let $=null,K,j,X;for(l=0;l<=Fe;l++)b[l]=0;for(f=0;f<i;f++)b[n[t+f]]++;for(c=h,p=Fe;p>=1&&b[p]===0;p--);if(c>p&&(c=p),p===0)return a[r++]=1<<24|64<<16|0,a[r++]=1<<24|64<<16|0,s.bits=1,0;for(A=1;A<p&&b[A]===0;A++);for(c<A&&(c=A),O=1,l=1;l<=Fe;l++)if(O<<=1,O-=b[l],O<0)return-1;if(O>0&&(e===Rn||p!==1))return-1;for(S[1]=0,l=1;l<Fe;l++)S[l+1]=S[l]+b[l];for(f=0;f<i;f++)n[t+f]!==0&&(o[S[n[t+f]]++]=f);if(e===Rn?(T=$=o,y=20):e===Gt?(T=il,$=al,y=257):(T=rl,$=ll,y=0),R=0,f=0,l=A,g=r,m=c,Z=0,z=-1,L=1<<c,x=L-1,e===Gt&&L>An||e===zn&&L>On)return 1;for(;;){K=l-Z,o[f]+1<y?(j=0,X=o[f]):o[f]>=y?(j=$[o[f]-y],X=T[o[f]-y]):(j=96,X=0),N=1<<l-Z,d=1<<m,A=d;do d-=N,a[g+(R>>Z)+d]=K<<24|j<<16|X|0;while(d!==0);for(N=1<<l-1;R&N;)N>>=1;if(N!==0?(R&=N-1,R+=N):R=0,f++,--b[l]===0){if(l===p)break;l=n[t+o[f]]}if(l>c&&(R&x)!==z){for(Z===0&&(Z=c),g+=A,m=l-Z,O=1<<m;m+Z<p&&(O-=b[m+Z],!(O<=0));)m++,O<<=1;if(L+=1<<m,e===Gt&&L>An||e===zn&&L>On)return 1;z=R&x,a[z]=c<<24|m<<16|g-r|0}}return R!==0&&(a[g+R]=l-Z<<24|64<<16|0),s.bits=c,0};var nt=ol;const sl=0,Ri=1,zi=2,{Z_FINISH:Mn,Z_BLOCK:fl,Z_TREES:wt,Z_OK:Oe,Z_STREAM_END:cl,Z_NEED_DICT:hl,Z_STREAM_ERROR:ae,Z_DATA_ERROR:Mi,Z_MEM_ERROR:Fi,Z_BUF_ERROR:dl,Z_DEFLATED:Fn}=dt,At=16180,Cn=16181,Zn=16182,Pn=16183,Bn=16184,Un=16185,Hn=16186,$n=16187,Yn=16188,Gn=16189,Tt=16190,he=16191,Xt=16192,Xn=16193,Vt=16194,Vn=16195,Kn=16196,jn=16197,Wn=16198,Et=16199,mt=16200,Jn=16201,qn=16202,Qn=16203,ei=16204,ti=16205,Kt=16206,ni=16207,ii=16208,B=16209,Ci=16210,Zi=16211,ul=852,_l=592,pl=15,gl=pl,ai=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function vl(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Re=e=>{if(!e)return 1;const n=e.state;return!n||n.strm!==e||n.mode<At||n.mode>Zi?1:0},Pi=e=>{if(Re(e))return ae;const n=e.state;return e.total_in=e.total_out=n.total=0,e.msg="",n.wrap&&(e.adler=n.wrap&1),n.mode=At,n.last=0,n.havedict=0,n.flags=-1,n.dmax=32768,n.head=null,n.hold=0,n.bits=0,n.lencode=n.lendyn=new Int32Array(ul),n.distcode=n.distdyn=new Int32Array(_l),n.sane=1,n.back=-1,Oe},Bi=e=>{if(Re(e))return ae;const n=e.state;return n.wsize=0,n.whave=0,n.wnext=0,Pi(e)},Ui=(e,n)=>{let t;if(Re(e))return ae;const i=e.state;return n<0?(t=0,n=-n):(t=(n>>4)+5,n<48&&(n&=15)),n&&(n<8||n>15)?ae:(i.window!==null&&i.wbits!==n&&(i.window=null),i.wrap=t,i.wbits=n,Bi(e))},Hi=(e,n)=>{if(!e)return ae;const t=new vl;e.state=t,t.strm=e,t.window=null,t.mode=At;const i=Ui(e,n);return i!==Oe&&(e.state=null),i},bl=e=>Hi(e,gl);let ri=!0,jt,Wt;const wl=e=>{if(ri){jt=new Int32Array(512),Wt=new Int32Array(32);let n=0;for(;n<144;)e.lens[n++]=8;for(;n<256;)e.lens[n++]=9;for(;n<280;)e.lens[n++]=7;for(;n<288;)e.lens[n++]=8;for(nt(Ri,e.lens,0,288,jt,0,e.work,{bits:9}),n=0;n<32;)e.lens[n++]=5;nt(zi,e.lens,0,32,Wt,0,e.work,{bits:5}),ri=!1}e.lencode=jt,e.lenbits=9,e.distcode=Wt,e.distbits=5},$i=(e,n,t,i)=>{let a;const r=e.state;return r.window===null&&(r.wsize=1<<r.wbits,r.wnext=0,r.whave=0,r.window=new Uint8Array(r.wsize)),i>=r.wsize?(r.window.set(n.subarray(t-r.wsize,t),0),r.wnext=0,r.whave=r.wsize):(a=r.wsize-r.wnext,a>i&&(a=i),r.window.set(n.subarray(t-i,t-i+a),r.wnext),i-=a,i?(r.window.set(n.subarray(t-i,t),0),r.wnext=i,r.whave=r.wsize):(r.wnext+=a,r.wnext===r.wsize&&(r.wnext=0),r.whave<r.wsize&&(r.whave+=a))),0},El=(e,n)=>{let t,i,a,r,o,s,h,l,f,A,p,c,m,Z,O=0,L,R,N,d,z,x,g,T;const y=new Uint8Array(4);let b,S;const $=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Re(e)||!e.output||!e.input&&e.avail_in!==0)return ae;t=e.state,t.mode===he&&(t.mode=Xt),o=e.next_out,a=e.output,h=e.avail_out,r=e.next_in,i=e.input,s=e.avail_in,l=t.hold,f=t.bits,A=s,p=h,T=Oe;e:for(;;)switch(t.mode){case At:if(t.wrap===0){t.mode=Xt;break}for(;f<16;){if(s===0)break e;s--,l+=i[r++]<<f,f+=8}if(t.wrap&2&&l===35615){t.wbits===0&&(t.wbits=15),t.check=0,y[0]=l&255,y[1]=l>>>8&255,t.check=Y(t.check,y,2,0),l=0,f=0,t.mode=Cn;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((l&255)<<8)+(l>>8))%31){e.msg="incorrect header check",t.mode=B;break}if((l&15)!==Fn){e.msg="unknown compression method",t.mode=B;break}if(l>>>=4,f-=4,g=(l&15)+8,t.wbits===0&&(t.wbits=g),g>15||g>t.wbits){e.msg="invalid window size",t.mode=B;break}t.dmax=1<<t.wbits,t.flags=0,e.adler=t.check=1,t.mode=l&512?Gn:he,l=0,f=0;break;case Cn:for(;f<16;){if(s===0)break e;s--,l+=i[r++]<<f,f+=8}if(t.flags=l,(t.flags&255)!==Fn){e.msg="unknown compression method",t.mode=B;break}if(t.flags&57344){e.msg="unknown header flags set",t.mode=B;break}t.head&&(t.head.text=l>>8&1),t.flags&512&&t.wrap&4&&(y[0]=l&255,y[1]=l>>>8&255,t.check=Y(t.check,y,2,0)),l=0,f=0,t.mode=Zn;case Zn:for(;f<32;){if(s===0)break e;s--,l+=i[r++]<<f,f+=8}t.head&&(t.head.time=l),t.flags&512&&t.wrap&4&&(y[0]=l&255,y[1]=l>>>8&255,y[2]=l>>>16&255,y[3]=l>>>24&255,t.check=Y(t.check,y,4,0)),l=0,f=0,t.mode=Pn;case Pn:for(;f<16;){if(s===0)break e;s--,l+=i[r++]<<f,f+=8}t.head&&(t.head.xflags=l&255,t.head.os=l>>8),t.flags&512&&t.wrap&4&&(y[0]=l&255,y[1]=l>>>8&255,t.check=Y(t.check,y,2,0)),l=0,f=0,t.mode=Bn;case Bn:if(t.flags&1024){for(;f<16;){if(s===0)break e;s--,l+=i[r++]<<f,f+=8}t.length=l,t.head&&(t.head.extra_len=l),t.flags&512&&t.wrap&4&&(y[0]=l&255,y[1]=l>>>8&255,t.check=Y(t.check,y,2,0)),l=0,f=0}else t.head&&(t.head.extra=null);t.mode=Un;case Un:if(t.flags&1024&&(c=t.length,c>s&&(c=s),c&&(t.head&&(g=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(i.subarray(r,r+c),g)),t.flags&512&&t.wrap&4&&(t.check=Y(t.check,i,c,r)),s-=c,r+=c,t.length-=c),t.length))break e;t.length=0,t.mode=Hn;case Hn:if(t.flags&2048){if(s===0)break e;c=0;do g=i[r+c++],t.head&&g&&t.length<65536&&(t.head.name+=String.fromCharCode(g));while(g&&c<s);if(t.flags&512&&t.wrap&4&&(t.check=Y(t.check,i,c,r)),s-=c,r+=c,g)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=$n;case $n:if(t.flags&4096){if(s===0)break e;c=0;do g=i[r+c++],t.head&&g&&t.length<65536&&(t.head.comment+=String.fromCharCode(g));while(g&&c<s);if(t.flags&512&&t.wrap&4&&(t.check=Y(t.check,i,c,r)),s-=c,r+=c,g)break e}else t.head&&(t.head.comment=null);t.mode=Yn;case Yn:if(t.flags&512){for(;f<16;){if(s===0)break e;s--,l+=i[r++]<<f,f+=8}if(t.wrap&4&&l!==(t.check&65535)){e.msg="header crc mismatch",t.mode=B;break}l=0,f=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),e.adler=t.check=0,t.mode=he;break;case Gn:for(;f<32;){if(s===0)break e;s--,l+=i[r++]<<f,f+=8}e.adler=t.check=ai(l),l=0,f=0,t.mode=Tt;case Tt:if(t.havedict===0)return e.next_out=o,e.avail_out=h,e.next_in=r,e.avail_in=s,t.hold=l,t.bits=f,hl;e.adler=t.check=1,t.mode=he;case he:if(n===fl||n===wt)break e;case Xt:if(t.last){l>>>=f&7,f-=f&7,t.mode=Kt;break}for(;f<3;){if(s===0)break e;s--,l+=i[r++]<<f,f+=8}switch(t.last=l&1,l>>>=1,f-=1,l&3){case 0:t.mode=Xn;break;case 1:if(wl(t),t.mode=Et,n===wt){l>>>=2,f-=2;break e}break;case 2:t.mode=Kn;break;case 3:e.msg="invalid block type",t.mode=B}l>>>=2,f-=2;break;case Xn:for(l>>>=f&7,f-=f&7;f<32;){if(s===0)break e;s--,l+=i[r++]<<f,f+=8}if((l&65535)!==(l>>>16^65535)){e.msg="invalid stored block lengths",t.mode=B;break}if(t.length=l&65535,l=0,f=0,t.mode=Vt,n===wt)break e;case Vt:t.mode=Vn;case Vn:if(c=t.length,c){if(c>s&&(c=s),c>h&&(c=h),c===0)break e;a.set(i.subarray(r,r+c),o),s-=c,r+=c,h-=c,o+=c,t.length-=c;break}t.mode=he;break;case Kn:for(;f<14;){if(s===0)break e;s--,l+=i[r++]<<f,f+=8}if(t.nlen=(l&31)+257,l>>>=5,f-=5,t.ndist=(l&31)+1,l>>>=5,f-=5,t.ncode=(l&15)+4,l>>>=4,f-=4,t.nlen>286||t.ndist>30){e.msg="too many length or distance symbols",t.mode=B;break}t.have=0,t.mode=jn;case jn:for(;t.have<t.ncode;){for(;f<3;){if(s===0)break e;s--,l+=i[r++]<<f,f+=8}t.lens[$[t.have++]]=l&7,l>>>=3,f-=3}for(;t.have<19;)t.lens[$[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,b={bits:t.lenbits},T=nt(sl,t.lens,0,19,t.lencode,0,t.work,b),t.lenbits=b.bits,T){e.msg="invalid code lengths set",t.mode=B;break}t.have=0,t.mode=Wn;case Wn:for(;t.have<t.nlen+t.ndist;){for(;O=t.lencode[l&(1<<t.lenbits)-1],L=O>>>24,R=O>>>16&255,N=O&65535,!(L<=f);){if(s===0)break e;s--,l+=i[r++]<<f,f+=8}if(N<16)l>>>=L,f-=L,t.lens[t.have++]=N;else{if(N===16){for(S=L+2;f<S;){if(s===0)break e;s--,l+=i[r++]<<f,f+=8}if(l>>>=L,f-=L,t.have===0){e.msg="invalid bit length repeat",t.mode=B;break}g=t.lens[t.have-1],c=3+(l&3),l>>>=2,f-=2}else if(N===17){for(S=L+3;f<S;){if(s===0)break e;s--,l+=i[r++]<<f,f+=8}l>>>=L,f-=L,g=0,c=3+(l&7),l>>>=3,f-=3}else{for(S=L+7;f<S;){if(s===0)break e;s--,l+=i[r++]<<f,f+=8}l>>>=L,f-=L,g=0,c=11+(l&127),l>>>=7,f-=7}if(t.have+c>t.nlen+t.ndist){e.msg="invalid bit length repeat",t.mode=B;break}for(;c--;)t.lens[t.have++]=g}}if(t.mode===B)break;if(t.lens[256]===0){e.msg="invalid code -- missing end-of-block",t.mode=B;break}if(t.lenbits=9,b={bits:t.lenbits},T=nt(Ri,t.lens,0,t.nlen,t.lencode,0,t.work,b),t.lenbits=b.bits,T){e.msg="invalid literal/lengths set",t.mode=B;break}if(t.distbits=6,t.distcode=t.distdyn,b={bits:t.distbits},T=nt(zi,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,b),t.distbits=b.bits,T){e.msg="invalid distances set",t.mode=B;break}if(t.mode=Et,n===wt)break e;case Et:t.mode=mt;case mt:if(s>=6&&h>=258){e.next_out=o,e.avail_out=h,e.next_in=r,e.avail_in=s,t.hold=l,t.bits=f,nl(e,p),o=e.next_out,a=e.output,h=e.avail_out,r=e.next_in,i=e.input,s=e.avail_in,l=t.hold,f=t.bits,t.mode===he&&(t.back=-1);break}for(t.back=0;O=t.lencode[l&(1<<t.lenbits)-1],L=O>>>24,R=O>>>16&255,N=O&65535,!(L<=f);){if(s===0)break e;s--,l+=i[r++]<<f,f+=8}if(R&&!(R&240)){for(d=L,z=R,x=N;O=t.lencode[x+((l&(1<<d+z)-1)>>d)],L=O>>>24,R=O>>>16&255,N=O&65535,!(d+L<=f);){if(s===0)break e;s--,l+=i[r++]<<f,f+=8}l>>>=d,f-=d,t.back+=d}if(l>>>=L,f-=L,t.back+=L,t.length=N,R===0){t.mode=ti;break}if(R&32){t.back=-1,t.mode=he;break}if(R&64){e.msg="invalid literal/length code",t.mode=B;break}t.extra=R&15,t.mode=Jn;case Jn:if(t.extra){for(S=t.extra;f<S;){if(s===0)break e;s--,l+=i[r++]<<f,f+=8}t.length+=l&(1<<t.extra)-1,l>>>=t.extra,f-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=qn;case qn:for(;O=t.distcode[l&(1<<t.distbits)-1],L=O>>>24,R=O>>>16&255,N=O&65535,!(L<=f);){if(s===0)break e;s--,l+=i[r++]<<f,f+=8}if(!(R&240)){for(d=L,z=R,x=N;O=t.distcode[x+((l&(1<<d+z)-1)>>d)],L=O>>>24,R=O>>>16&255,N=O&65535,!(d+L<=f);){if(s===0)break e;s--,l+=i[r++]<<f,f+=8}l>>>=d,f-=d,t.back+=d}if(l>>>=L,f-=L,t.back+=L,R&64){e.msg="invalid distance code",t.mode=B;break}t.offset=N,t.extra=R&15,t.mode=Qn;case Qn:if(t.extra){for(S=t.extra;f<S;){if(s===0)break e;s--,l+=i[r++]<<f,f+=8}t.offset+=l&(1<<t.extra)-1,l>>>=t.extra,f-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){e.msg="invalid distance too far back",t.mode=B;break}t.mode=ei;case ei:if(h===0)break e;if(c=p-h,t.offset>c){if(c=t.offset-c,c>t.whave&&t.sane){e.msg="invalid distance too far back",t.mode=B;break}c>t.wnext?(c-=t.wnext,m=t.wsize-c):m=t.wnext-c,c>t.length&&(c=t.length),Z=t.window}else Z=a,m=o-t.offset,c=t.length;c>h&&(c=h),h-=c,t.length-=c;do a[o++]=Z[m++];while(--c);t.length===0&&(t.mode=mt);break;case ti:if(h===0)break e;a[o++]=t.length,h--,t.mode=mt;break;case Kt:if(t.wrap){for(;f<32;){if(s===0)break e;s--,l|=i[r++]<<f,f+=8}if(p-=h,e.total_out+=p,t.total+=p,t.wrap&4&&p&&(e.adler=t.check=t.flags?Y(t.check,a,p,o-p):ot(t.check,a,p,o-p)),p=h,t.wrap&4&&(t.flags?l:ai(l))!==t.check){e.msg="incorrect data check",t.mode=B;break}l=0,f=0}t.mode=ni;case ni:if(t.wrap&&t.flags){for(;f<32;){if(s===0)break e;s--,l+=i[r++]<<f,f+=8}if(t.wrap&4&&l!==(t.total&4294967295)){e.msg="incorrect length check",t.mode=B;break}l=0,f=0}t.mode=ii;case ii:T=cl;break e;case B:T=Mi;break e;case Ci:return Fi;case Zi:default:return ae}return e.next_out=o,e.avail_out=h,e.next_in=r,e.avail_in=s,t.hold=l,t.bits=f,(t.wsize||p!==e.avail_out&&t.mode<B&&(t.mode<Kt||n!==Mn))&&$i(e,e.output,e.next_out,p-e.avail_out),A-=e.avail_in,p-=e.avail_out,e.total_in+=A,e.total_out+=p,t.total+=p,t.wrap&4&&p&&(e.adler=t.check=t.flags?Y(t.check,a,p,e.next_out-p):ot(t.check,a,p,e.next_out-p)),e.data_type=t.bits+(t.last?64:0)+(t.mode===he?128:0)+(t.mode===Et||t.mode===Vt?256:0),(A===0&&p===0||n===Mn)&&T===Oe&&(T=dl),T},ml=e=>{if(Re(e))return ae;let n=e.state;return n.window&&(n.window=null),e.state=null,Oe},xl=(e,n)=>{if(Re(e))return ae;const t=e.state;return t.wrap&2?(t.head=n,n.done=!1,Oe):ae},yl=(e,n)=>{const t=n.length;let i,a,r;return Re(e)||(i=e.state,i.wrap!==0&&i.mode!==Tt)?ae:i.mode===Tt&&(a=1,a=ot(a,n,t,0),a!==i.check)?Mi:(r=$i(e,n,t,t),r?(i.mode=Ci,Fi):(i.havedict=1,Oe))};var Sl=Bi,kl=Ui,Tl=Pi,Il=bl,Dl=Hi,Ll=El,Nl=ml,Al=xl,Ol=yl,Rl="pako inflate (from Nodeca project)",_e={inflateReset:Sl,inflateReset2:kl,inflateResetKeep:Tl,inflateInit:Il,inflateInit2:Dl,inflate:Ll,inflateEnd:Nl,inflateGetHeader:Al,inflateSetDictionary:Ol,inflateInfo:Rl};function zl(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var Ml=zl;const Yi=Object.prototype.toString,{Z_NO_FLUSH:Fl,Z_FINISH:Cl,Z_OK:ct,Z_STREAM_END:Jt,Z_NEED_DICT:qt,Z_STREAM_ERROR:Zl,Z_DATA_ERROR:li,Z_MEM_ERROR:Pl}=dt;function _t(e){this.options=Nt.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const n=this.options;n.raw&&n.windowBits>=0&&n.windowBits<16&&(n.windowBits=-n.windowBits,n.windowBits===0&&(n.windowBits=-15)),n.windowBits>=0&&n.windowBits<16&&!(e&&e.windowBits)&&(n.windowBits+=32),n.windowBits>15&&n.windowBits<48&&(n.windowBits&15||(n.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ai,this.strm.avail_out=0;let t=_e.inflateInit2(this.strm,n.windowBits);if(t!==ct)throw new Error(Ze[t]);if(this.header=new Ml,_e.inflateGetHeader(this.strm,this.header),n.dictionary&&(typeof n.dictionary=="string"?n.dictionary=ft.string2buf(n.dictionary):Yi.call(n.dictionary)==="[object ArrayBuffer]"&&(n.dictionary=new Uint8Array(n.dictionary)),n.raw&&(t=_e.inflateSetDictionary(this.strm,n.dictionary),t!==ct)))throw new Error(Ze[t])}_t.prototype.push=function(e,n){const t=this.strm,i=this.options.chunkSize,a=this.options.dictionary;let r,o,s;if(this.ended)return!1;for(n===~~n?o=n:o=n===!0?Cl:Fl,Yi.call(e)==="[object ArrayBuffer]"?t.input=new Uint8Array(e):t.input=e,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(i),t.next_out=0,t.avail_out=i),r=_e.inflate(t,o),r===qt&&a&&(r=_e.inflateSetDictionary(t,a),r===ct?r=_e.inflate(t,o):r===li&&(r=qt));t.avail_in>0&&r===Jt&&t.state.wrap>0&&e[t.next_in]!==0;)_e.inflateReset(t),r=_e.inflate(t,o);switch(r){case Zl:case li:case qt:case Pl:return this.onEnd(r),this.ended=!0,!1}if(s=t.avail_out,t.next_out&&(t.avail_out===0||r===Jt))if(this.options.to==="string"){let h=ft.utf8border(t.output,t.next_out),l=t.next_out-h,f=ft.buf2string(t.output,h);t.next_out=l,t.avail_out=i-l,l&&t.output.set(t.output.subarray(h,h+l),0),this.onData(f)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(r===ct&&s===0)){if(r===Jt)return r=_e.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};_t.prototype.onData=function(e){this.chunks.push(e)};_t.prototype.onEnd=function(e){e===ct&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Nt.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function vn(e,n){const t=new _t(n);if(t.push(e),t.err)throw t.msg||Ze[t.err];return t.result}function Bl(e,n){return n=n||{},n.raw=!0,vn(e,n)}var Ul=_t,Hl=vn,$l=Bl,Yl=vn,Gl=dt,Xl={Inflate:Ul,inflate:Hl,inflateRaw:$l,ungzip:Yl,constants:Gl};const{Inflate:No,inflate:Vl,inflateRaw:Ao,ungzip:Oo}=Xl;var Kl=Vl,Gi=function(){if(typeof Map<"u")return Map;function e(n,t){var i=-1;return n.some(function(a,r){return a[0]===t?(i=r,!0):!1}),i}return function(){function n(){this.__entries__=[]}return Object.defineProperty(n.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),n.prototype.get=function(t){var i=e(this.__entries__,t),a=this.__entries__[i];return a&&a[1]},n.prototype.set=function(t,i){var a=e(this.__entries__,t);~a?this.__entries__[a][1]=i:this.__entries__.push([t,i])},n.prototype.delete=function(t){var i=this.__entries__,a=e(i,t);~a&&i.splice(a,1)},n.prototype.has=function(t){return!!~e(this.__entries__,t)},n.prototype.clear=function(){this.__entries__.splice(0)},n.prototype.forEach=function(t,i){i===void 0&&(i=null);for(var a=0,r=this.__entries__;a<r.length;a++){var o=r[a];t.call(i,o[1],o[0])}},n}()}(),cn=typeof window<"u"&&typeof document<"u"&&window.document===document,It=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),jl=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(It):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)}}(),Wl=2;function Jl(e,n){var t=!1,i=!1,a=0;function r(){t&&(t=!1,e()),i&&s()}function o(){jl(r)}function s(){var h=Date.now();if(t){if(h-a<Wl)return;i=!0}else t=!0,i=!1,setTimeout(o,n);a=h}return s}var ql=20,Ql=["top","right","bottom","left","width","height","size","weight"],eo=typeof MutationObserver<"u",to=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=Jl(this.refresh.bind(this),ql)}return e.prototype.addObserver=function(n){~this.observers_.indexOf(n)||this.observers_.push(n),this.connected_||this.connect_()},e.prototype.removeObserver=function(n){var t=this.observers_,i=t.indexOf(n);~i&&t.splice(i,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){var n=this.updateObservers_();n&&this.refresh()},e.prototype.updateObservers_=function(){var n=this.observers_.filter(function(t){return t.gatherActive(),t.hasActive()});return n.forEach(function(t){return t.broadcastActive()}),n.length>0},e.prototype.connect_=function(){!cn||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),eo?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){!cn||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(n){var t=n.propertyName,i=t===void 0?"":t,a=Ql.some(function(r){return!!~i.indexOf(r)});a&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),Xi=function(e,n){for(var t=0,i=Object.keys(n);t<i.length;t++){var a=i[t];Object.defineProperty(e,a,{value:n[a],enumerable:!1,writable:!1,configurable:!0})}return e},Ue=function(e){var n=e&&e.ownerDocument&&e.ownerDocument.defaultView;return n||It},Vi=Ot(0,0,0,0);function Dt(e){return parseFloat(e)||0}function oi(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];return n.reduce(function(i,a){var r=e["border-"+a+"-width"];return i+Dt(r)},0)}function no(e){for(var n=["top","right","bottom","left"],t={},i=0,a=n;i<a.length;i++){var r=a[i],o=e["padding-"+r];t[r]=Dt(o)}return t}function io(e){var n=e.getBBox();return Ot(0,0,n.width,n.height)}function ao(e){var n=e.clientWidth,t=e.clientHeight;if(!n&&!t)return Vi;var i=Ue(e).getComputedStyle(e),a=no(i),r=a.left+a.right,o=a.top+a.bottom,s=Dt(i.width),h=Dt(i.height);if(i.boxSizing==="border-box"&&(Math.round(s+r)!==n&&(s-=oi(i,"left","right")+r),Math.round(h+o)!==t&&(h-=oi(i,"top","bottom")+o)),!lo(e)){var l=Math.round(s+r)-n,f=Math.round(h+o)-t;Math.abs(l)!==1&&(s-=l),Math.abs(f)!==1&&(h-=f)}return Ot(a.left,a.top,s,h)}var ro=function(){return typeof SVGGraphicsElement<"u"?function(e){return e instanceof Ue(e).SVGGraphicsElement}:function(e){return e instanceof Ue(e).SVGElement&&typeof e.getBBox=="function"}}();function lo(e){return e===Ue(e).document.documentElement}function oo(e){return cn?ro(e)?io(e):ao(e):Vi}function so(e){var n=e.x,t=e.y,i=e.width,a=e.height,r=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,o=Object.create(r.prototype);return Xi(o,{x:n,y:t,width:i,height:a,top:t,right:n+i,bottom:a+t,left:n}),o}function Ot(e,n,t,i){return{x:e,y:n,width:t,height:i}}var fo=function(){function e(n){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=Ot(0,0,0,0),this.target=n}return e.prototype.isActive=function(){var n=oo(this.target);return this.contentRect_=n,n.width!==this.broadcastWidth||n.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var n=this.contentRect_;return this.broadcastWidth=n.width,this.broadcastHeight=n.height,n},e}(),co=function(){function e(n,t){var i=so(t);Xi(this,{target:n,contentRect:i})}return e}(),ho=function(){function e(n,t,i){if(this.activeObservations_=[],this.observations_=new Gi,typeof n!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=n,this.controller_=t,this.callbackCtx_=i}return e.prototype.observe=function(n){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(n instanceof Ue(n).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(n)||(t.set(n,new fo(n)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(n){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(n instanceof Ue(n).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(n)&&(t.delete(n),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var n=this;this.clearActive(),this.observations_.forEach(function(t){t.isActive()&&n.activeObservations_.push(t)})},e.prototype.broadcastActive=function(){if(this.hasActive()){var n=this.callbackCtx_,t=this.activeObservations_.map(function(i){return new co(i.target,i.broadcastRect())});this.callback_.call(n,t,n),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),Ki=typeof WeakMap<"u"?new WeakMap:new Gi,ji=function(){function e(n){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var t=to.getInstance(),i=new ho(n,t,this);Ki.set(this,i)}return e}();["observe","unobserve","disconnect"].forEach(function(e){ji.prototype[e]=function(){var n;return(n=Ki.get(this))[e].apply(n,arguments)}});var uo=function(){return typeof It.ResizeObserver<"u"?It.ResizeObserver:ji}();const _o={class:"canvas-container"},po=si({__name:"Canvas",emits:["select:item","childLoaded"],setup(e,{expose:n,emit:t}){const i=t,a=U(null),r=U({data:[]}),o=U(!1),s=U(0);let h=0,l=0,f=0,A=0;const p=x=>{o.value=!0,f=x.clientX-a.value.offsetLeft,A=x.clientY-a.value.offsetTop,document.addEventListener("mousemove",c),document.addEventListener("mouseup",m),a.value.style.cursor="grabbing"},c=x=>{if(o.value){const g=x.clientX-f-h,T=x.clientY-A-l;a.value.style.left=`${g}px`,a.value.style.top=`${T}px`}},m=()=>{o.value=!1,a.value.style.cursor="grab",document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",m),h=0,l=0,f=0,A=0},Z=x=>{const g={};return x.forEach(T=>{const y=T.guid??`no-guid-${T.Type}`;g[y]||(g[y]=[]),g[y].push(T)}),g},O=()=>{if(a.value&&a.value.parentNode){const x=a.value.parentNode;a.value.width=x.clientWidth,a.value.height=x.clientHeight,L()}},L=()=>{var g;if(o.value)return;const x=(g=a.value)==null?void 0:g.getContext("2d");if(x){const T=a.value;x.fillStyle="#000",x.clearRect(0,0,T.width,T.height),x.fillRect(0,0,T.width,T.height);let y=1/0,b=1/0,S=-1/0,$=-1/0;r.value.data.forEach(V=>{const ce=Zt(V,x);if(ce.getBounds){const pe=ce.getBounds();y=Math.min(y,pe.x),b=Math.min(b,pe.y),S=Math.max(S,pe.x+pe.width),$=Math.max($,pe.y+pe.height)}});const K={x:y,y:b,width:S-y,height:$-b},j=(T.width-K.width)/2-y,X=(T.height-K.height)/2-b;r.value.data.forEach(V=>{const ce=Zt(V,x);ce&&(ce.translate(j,X),ce.draw(x))})}},R=U({ElepoName:"",MlineId:""}),N=(x,g)=>{const T=xt.get("Token");if(T)if(g){const y={netmlineid:g,token:T};a.value&&(a.value.style.left="0px",a.value.style.top="0px"),ca(y).then(b=>{if(b.Code===1&&b.Message)try{const S=JSON.parse(b.Message);if(S&&S.length>0){const $=Uint8Array.from(atob(S[0].DRAWLINEDATA),V=>V.charCodeAt(0)).buffer,K=Kl(new Uint8Array($),{to:"string"}),j=JSON.parse(K),X=j.data.find(V=>V.Type==="DrawRectangle"&&V.DM.ElepoName&&V.DM.MlineId);X?(R.value.ElepoName=X.DM.ElepoName,R.value.MlineId=X.DM.MlineId,i("childLoaded",R.value)):(R.value.ElepoName="",R.value.MlineId=""),r.value.data=j.data,L()}}catch(S){console.error("解析响应消息失败",S)}}).catch(b=>{console.error("获取线路图数据失败",b)})}else{const y={mlineid:x,token:T};a.value&&(a.value.style.left="0px",a.value.style.top="0px"),ha(y).then(b=>{if(b.Code===1&&b.Message)try{const S=JSON.parse(b.Message);r.value.data=S,L()}catch(S){console.error("解析响应消息失败",S)}}).catch(b=>{console.error("获取线路图数据失败",b)})}},d=x=>{var $;const g=a.value.getBoundingClientRect(),T=x.clientX-g.left,y=x.clientY-g.top,b=Z(r.value.data),S=($=a.value)==null?void 0:$.getContext("2d");Object.values(b).flat().some(K=>{var X;const j=Zt(K,S);if(j&&j.containsPoint&&j.containsPoint(T,y)){if((X=K.DM)!=null&&X.MlineId)return i("select:item",{mlineId:K.DM.MlineId,str:K.str}),!0;{const V=new Date().getTime();return V-s.value>1500&&(Qi({title:"获取数据",message:"该节点未获取到数据",duration:1500}),s.value=V),!0}}return!1})},z=U(null);return Qt(()=>{var x,g;O(),window.addEventListener("resize",O),(x=a.value)==null||x.addEventListener("mousedown",p),(g=a.value)==null||g.addEventListener("click",d),z.value=new uo(T=>{for(let y of T)O(),L()}),a.value&&z.value.observe(a.value.parentNode)}),Ji(O),qi(()=>{var x;window.removeEventListener("resize",O),a.value&&a.value.removeEventListener("mousedown",p),(x=a.value)==null||x.removeEventListener("click",d),z.value&&z.value.disconnect()}),n({handleCanvasClick:d,getLineDrawData:N,targetDataDM:R}),(x,g)=>(le(),Je("div",_o,[de("canvas",{ref_key:"canvasRef",ref:a,class:"canvas-el"},null,512)]))}}),go=fi(po,[["__scopeId","data-v-71894ec5"]]),vo={class:"line"},bo={class:"tree-container"},wo={class:"parent"},Eo={class:"div-container"},mo={class:"tabs-container"},xo={class:"el-date"},yo={key:0,style:{flex:"1"}},So={key:1,style:{flex:"1"}},ko=si({__name:"index",setup(e){const n=U(null),t=U(null),i=U({ElepoName:"",MlineId:""}),a=U([new Date(new Date().getTime()-7*24*3600*1e3),new Date]),r=U(new Date().getTime()-1*24*3600*1e3),o=U([{id:"fixed-tab-1",title:"线路标签",mlineId:"",data:[]},{id:"fixed-tab-2",title:"数据标签",mlineId:"",data:[]}]),s=u=>{r.value=u,u&&o.value[1].mlineId&&N(o.value[1].mlineId,o.value[1].title,"true")},h=U(o.value[0].id),l=U([]),f=U(null),A=U([]),p=U([]),c=U(""),m=U(null),Z=u=>{i.value=u},O=(u,_)=>{const v=ua(n.value);if(v.clear(),u.length===0){v.setOption({graphic:{type:"text",left:"center",top:"middle",silent:!0,style:{fill:"#9d9d9d",fontWeight:"bold",text:"暂无数据",fontFamily:"Microsoft YaHei",fontSize:"25px"}}});return}const E=u.filter(k=>k.ElepoName===_);if(E.length===0){v.setOption({graphic:{type:"text",left:"center",top:"middle",silent:!0,style:{fill:"#9d9d9d",fontWeight:"bold",text:"无匹配数据",fontFamily:"Microsoft YaHei",fontSize:"25px"}}});return}const w=E.reduce((k,H)=>{const W=H.GPSTIME.substring(11,16),q=`${H.ElepoName}-${H.SLTYPE}`;return k[q]||(k[q]={name:H.ElepoName,SLTYPE:H.SLTYPE,电流:[],电压:[]}),k[q].电流.push([W,Number(parseFloat(H.AEV).toFixed(2))]),k[q].电压.push([W,Number(parseFloat(H.VEV).toFixed(2))]),k},{}),C=["全部电流",...Object.keys(w).flatMap(k=>[`${w[k].name} ${w[k].SLTYPE===1?"A相":w[k].SLTYPE===2?"B相":w[k].SLTYPE===3?"C相":"未知类型"}电流`]),"全部电压",...Object.keys(w).flatMap(k=>[`${w[k].name} ${w[k].SLTYPE===1?"A相":w[k].SLTYPE===2?"B相":w[k].SLTYPE===3?"C相":"未知类型"}电压`])];let D=C.reduce((k,H)=>(k[H]=H.includes("电流"),k),{});D.全部电流=!0,D.全部电压=!1;const I={data:C,selected:D,selectedMode:"multiple",textStyle:{color:"white"}};v.on("legendselectchanged",k=>{const{name:H}=k;if(H==="全部电流"){const W=!D.全部电流;Object.keys(D).forEach(q=>{q.includes("电流")&&(D[q]=W)}),D.全部电流=W}else if(H==="全部电压"){const W=!D.全部电压;Object.keys(D).forEach(q=>{q.includes("电压")&&(D[q]=W)}),D.全部电压=W}else{D[H]=!D[H];const W=Object.keys(D).some(ke=>ke.includes("电流")&&D[ke]);D.全部电流=W;const q=Object.keys(D).some(ke=>ke.includes("电压")&&D[ke]);D.全部电压=q}v.setOption({legend:{selected:D}},!1)});const be=[...new Set(E.map(k=>k.GPSTIME.substring(11,16)))].sort();Object.keys(w).forEach(k=>{const H=w[k].电流,W=w[k].电压,q=be.map((Te,Xe,zt)=>{const Ve=H.find(([Mt])=>Mt===Te);return Ve||(Xe===0||Xe===zt.length-1?[Te,null]:[Te,"-"])}),ke=be.map((Te,Xe,zt)=>{const Ve=W.find(([Mt])=>Mt===Te);return Ve||(Xe===0||Xe===zt.length-1?[Te,null]:[Te,"-"])});w[k].电流=q,w[k].电压=ke});const Se={tooltip:{trigger:"axis",axisPointer:{type:"cross"},textStyle:{color:"black"}},legend:I,xAxis:{type:"category",data:[...new Set(E.map(k=>k.GPSTIME.substring(11,16)))].sort(),axisLabel:{textStyle:{color:"white"}}},yAxis:[{name:"电流 (A)",type:"value",axisLabel:{formatter:"{value} A",textStyle:{color:"white"}},nameTextStyle:{color:"white"}},{name:"电压 (V)",type:"value",axisLabel:{formatter:"{value} V",textStyle:{color:"white"}},nameTextStyle:{color:"white"}}],series:[{name:"全部电流",type:"line",data:[],itemStyle:{opacity:0}},{name:"全部电压",type:"line",data:[],itemStyle:{opacity:0}},...Object.keys(w).flatMap(k=>[{name:`${w[k].name} ${w[k].SLTYPE===1?"A相":w[k].SLTYPE===2?"B相":w[k].SLTYPE===3?"C相":"未知类型"}电流`,type:"line",smooth:!0,connectNulls:!0,data:w[k].电流,itemStyle:{color:L(w[k].SLTYPE)}},{name:`${w[k].name} ${w[k].SLTYPE===1?"A相":w[k].SLTYPE===2?"B相":w[k].SLTYPE===3?"C相":"未知类型"}电压`,type:"line",yAxisIndex:1,smooth:!0,connectNulls:!0,data:w[k].电压,itemStyle:{color:L(w[k].SLTYPE)}}])],dataZoom:[{type:"slider",xAxisIndex:0,start:0,end:100,textStyle:{color:"white"}}]};v.setOption(Se);const P=()=>v.resize();window.addEventListener("resize",P)},L=u=>{switch(u){case 2:return"green";case 3:return"red";default:return"yellow"}},R=u=>{if(u){o.value[1].mlineId=u.mlineId,h.value="fixed-tab-2";const _=o.value.find(v=>v.id==="fixed-tab-2");_&&(_.title=u.str),N(o.value[1].mlineId,u.str,"true")}};async function N(u,_,v){if(_===""&&(o.value[1].title="数据标签"),u){const E=xt.get("Token");Ge.value=!0;try{const w=r.value||new Date,C=pt(w),D=pt(w,!0),I=ve.currentPage,be=ve.pageSize,Se=await En({deviceType:"-1",dataType:"1",mlineid:u,sTime:C,eTime:D,page:String(I),pageSize:String(be),token:E,netMlineid:""});if(Se.Code===1){let P=JSON.parse(Se.Message);if(v==="false")if(_===""){o.value[1].title="数据标签";const k=P.filter(H=>H.ElepoName);if(!k||k.length===0)o.value[1].title="数据标签";else{const H=new Set;P=k.filter(W=>H.has(W.ElepoName)?!1:(H.add(W.ElepoName),!0)),P.length>0?(_=P[0].ElepoName,o.value[1].title=_):(o.value[1].title="数据标签",P=[])}}else P=P.filter(k=>k.ElepoName===_);O(P,_)}else console.error("getPowerLineInfoForTab2: unexpected response format",Se)}catch(w){console.error("getPowerLineInfoForTab2: error fetching data",w)}finally{Ge.value=!1}}}const d=()=>{f.value&&f.value.filter(c.value)};function z(){ve.currentPage=1,Rt(),h.value==="fixed-tab-2"&&N(o.value[1].mlineId,o.value[1].title,"true")}const x=U(null),g=u=>{var _,v;if(!(u.ELEOFFID&&u.ELEOFFID.startsWith("E"))){if(u.NETMLINEID){ge.value=u.MLINEID,u.NETMLINEID===void 0?ze.value="":ze.value=u.NETMLINEID,bn.value=u.NETMLINEID,(_=x.value)==null||_.getLineDrawData(ge.value,ze.value),o.value[0].title=u.ELEOFFNAME,o.value.length>0&&(o.value[0].title=u.ELEOFFNAME,Ft(()=>{h.value=o.value[0].id}),Rt()),ze.value="",N(o.value[1].mlineId,o.value[1].title,"false");return}u.ELEOFFID&&u.ELEOFFID.startsWith("M")&&(!u.children||u.children.length===0)&&(ge.value=u.ELEOFFID,(v=x.value)==null||v.getLineDrawData(ge.value,ze.value),o.value.length>0&&(o.value[0].title=u.ELEOFFNAME,Ft(()=>{h.value=o.value[0].id}),Rt(),o.value[1].mlineId=ge.value,o.value[1].title="",N(o.value[1].mlineId,o.value[1].title,"false"))),ze.value="",N(o.value[1].mlineId,o.value[1].title,"true"),Wi(u.ELEOFFNAME,ge.value)}},T={children:"children",label:"ELEOFFNAME"};function y(u){const _={},v=[];return u.forEach(E=>{E.IsPELEOFFID=!0,_[E.ELEOFFID]={...E,children:[]}}),u.forEach(E=>{const{ELEOFFID:w,PELEOFFID:C}=E;C&&_[C].children?_[C].children.push(_[w]):v.push(_[w])}),v}function b(u){const _=[],v=new Map;return u.forEach(E=>{if(!E.NETMLINEID||E.PELEOFFID===null){_.push(E);return}if(v.has(E.NETMLINEID)){const w=v.get(E.NETMLINEID);w.children=[...w.children,...E.children]}else v.set(E.NETMLINEID,E),_.push(E)}),_.map(E=>({...E,children:E.children&&E.children.length>0?b(E.children):[]}))}function S(u,_){_.forEach(v=>{K(u,v.NETMLINEID,!0).forEach(w=>{const C={ELEOFFID:v.NETMLINEID,ELEOFFNAME:v.NETMLNAME,PELEOFFID:w.PELEOFFID,ELEOFFEVEL:2,children:[],IsPELEOFFID:!1,NETMLINEID:v.NETMLINEID,MLINEID:v.NETMLINEID};w.NETMLINEID="",C.children.push(w),$(w,u);const D=V(u,C.PELEOFFID);D?(D.children||(D.children=[]),D.children.push(C)):u.push(C)})})}function $(u,_){for(let v=0;v<_.length;v++)if(_[v].children&&_[v].children.length>0){const E=_[v].children.indexOf(u);if(E!==-1){_[v].children.splice(E,1);return}$(u,_[v].children)}}function K(u,_,v){const E=[];return u.forEach(w=>{if(!w.matched&&((w.NETMLINEID===_||!v)&&(E.push(w),w.matched=!0),w.children&&w.children.length>0&&!w.matched)){const C=K(w.children,_,v);E.push(...C),C.forEach(D=>{D!==w&&(D.matched=!0)})}}),E}async function j(){const u=xt.get("Token");try{const _=await _a(u);if(_.Code===1&&_.Message){const C=JSON.parse(_.Message);A.value=y(C)}const v=await pa(u);v.Code===1&&v.Message&&JSON.parse(v.Message).forEach(D=>{const I={ELEOFFID:D.MLINEID,ELEOFFNAME:D.MLNAME,PELEOFFID:D.ELEOFFID,ELEOFFEVEL:D.SPLITS,children:[],IsPELEOFFID:!1,NETMLINEID:void 0,MLINEID:D.MLINEID};ce(A.value,I,D.ELEOFFID)});const E=await da(u);E.Code===1&&E.Message&&JSON.parse(E.Message).forEach(D=>{const I=V(A.value,D.MLINEID);I&&(I.NETMLINEID=D.NETMLINEID)});const w=await ga(u);if(w.Code===1&&w.Message){const C=JSON.parse(w.Message);S(A.value,C),A.value=b(A.value)}}catch(_){console.error("Error fetching data",_)}}function X(u){u.forEach(_=>{_.matched=!1,X(_.children)})}function V(u,_){for(const v of u){if(v.ELEOFFID===_)return v;if(v.children){const E=V(v.children,_);if(E)return E}}return null}function ce(u,_,v){for(const E of u){if(E.ELEOFFID===v){E.children.push(_);return}E.children&&ce(E.children,_,v)}}const pe=(u,_)=>c.value?_.ELEOFFNAME.includes(c.value):!0,ge=U(""),ze=U(""),bn=U(""),Ge=U(!1),ve=ea({currentPage:1,pageSize:1e3,total:0}),pt=(u,_=!1)=>{const v=new Date(u);_&&v.setDate(v.getDate()+1);const E=v.getFullYear(),w=(v.getMonth()+1).toString().padStart(2,"0"),C=v.getDate().toString().padStart(2,"0"),D=v.getHours().toString().padStart(2,"0"),I=v.getMinutes().toString().padStart(2,"0"),be=v.getSeconds().toString().padStart(2,"0");return`${E}-${w}-${C}T${D}:${I}:${be}Z`};async function Rt(){if(!ge.value)return;const u=xt.get("Token");Ge.value=!0;try{const _=pt(a.value[0]),v=pt(a.value[1]),E=ve.currentPage,w=ve.pageSize,C=await En({deviceType:"-1",dataType:"1",mlineid:ge.value,sTime:_,eTime:v,page:String(E),pageSize:String(w),token:u,netMlineid:bn.value});if(C.Code===1){const D=JSON.parse(C.Message);p.value=D.map(I=>({MLNAME:I.MLNAME,ElepoName:I.ElepoName,WORKID:I.WORKID,GPSTIME:I.GPSTIME.replace("T"," "),SLTYPE:I.SLTYPE===1?"A相":I.SLTYPE===2?"B相":I.SLTYPE===3?"C相":"未知类型",AEV:I.AEV,VolEvel:I.VolEvel,BATVOL:I.BATVOL,TA:I.TA,RH:I.RH,ENOISE:I.ENOISE,EN_GPS:I.EN_GPS,GPSCN:I.GPSCN,PST:I.PST,SIGNAL4G1:I.SIGNAL4G1,SIGNAL4G2:I.SIGNAL4G2,LINK4GSTATE1:I.LINK4GSTATE1,LINK4GSTATE2:I.LINK4GSTATE2,CT:I.CT,DTUID:I.DTUID,CO_SCALE:I.CO_SCALE,P:I.P,Q:I.Q,POWERFACTOR:I.POWERFACTOR,FREQUENCY:I.FREQUENCY,DBTIME:I.DBTIME,Total:I.Total})),ve.total=D.length>0?D[0].Total:0}else console.error("getPowerLineInfo: unexpected response format",C),ve.total=0}catch(_){console.error("getPowerLineInfo: error fetching data",_),ve.total=0}finally{Ge.value=!1}}const Wi=(u,_)=>{let v=l.value.find(E=>E.id===_);if(v)v.title=u,v.active=!0;else{const E={id:_,title:u,active:!0};l.value.push(E)}h.value=_};return wn(h,u=>{if(u==="fixed-tab-2"&&o.value){const _=o.value.find(v=>v.id==="fixed-tab-2");_&&!_.data.length&&N(_.mlineId,o.value[1].title,"true")}}),wn(()=>i.value,async u=>{u.ElepoName&&u.MlineId?(o.value[1].mlineId=u.MlineId,o.value[1].title=u.ElepoName,await N(o.value[1].mlineId,o.value[1].title,"false"),i.value.ElepoName="",i.value.MlineId=""):console.log("没有数据")},{deep:!0,immediate:!0}),Qt(async()=>{await Ft(),t.value&&console.log("子组件已加载，可获取数据：",t.value.targetDataDM)}),Qt(()=>{X(A.value),j()}),(u,_)=>{const v=Ie("el-input"),E=Ie("el-icon"),w=Ie("el-tab-pane"),C=Ie("el-tabs"),D=Ie("el-date-picker"),I=Ie("el-table-column"),be=Ie("el-table"),Se=na("loading");return le(),Je("div",vo,[de("div",bo,[Q(v,{modelValue:c.value,"onUpdate:modelValue":_[0]||(_[0]=P=>c.value=P),placeholder:"输入关键字进行搜索",onInput:d,"prefix-icon":Ct(ia),clearable:"true",class:"searchStyle"},null,8,["modelValue","prefix-icon"]),Q(Ct(oa),{data:A.value,props:T,"filter-node-method":pe,ref_key:"treeRef",ref:f,"show-checkbox":!1,"default-expand-all":!0,"highlight-current":!0,onNodeClick:g},{default:gt(({node:P,data:k})=>[de("span",null,[aa(ra(P.label)+" ",1),P.data.IsPELEOFFID?(le(),Ke(E,{key:0,size:14},{default:gt(()=>[Q(Ct(la),{style:{width:"1em",height:"1em","margin-right":"8px",color:"white"}})]),_:1})):je("",!0)])]),_:1},8,["data"])]),de("div",wo,[de("div",Eo,[Q(go,{ref_key:"canvasRef",ref:x,"onSelect:item":R,onChildLoaded:Z},null,512)]),de("div",{class:"circuit-table",ref_key:"circuitTable",ref:m},[de("div",mo,[Q(C,{modelValue:h.value,"onUpdate:modelValue":_[1]||(_[1]=P=>h.value=P),class:"tabs",type:"border-card"},{default:gt(()=>[(le(!0),Je(sa,null,fa(o.value,P=>(le(),Ke(w,{key:P.id,label:P.title,name:P.id},null,8,["label","name"]))),128))]),_:1},8,["modelValue"]),de("div",xo,[h.value==="fixed-tab-1"?(le(),Ke(D,{key:0,"popper-class":"DataStyle",class:"el-date",modelValue:a.value,"onUpdate:modelValue":_[2]||(_[2]=P=>a.value=P),type:"daterange","unlink-panels":"true","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",onChange:z},null,8,["modelValue"])):je("",!0),h.value==="fixed-tab-2"?(le(),Ke(D,{key:1,"popper-class":"DataStyle",class:"el-date",modelValue:r.value,"onUpdate:modelValue":_[3]||(_[3]=P=>r.value=P),type:"date",placeholder:"选择日期",onChange:s},null,8,["modelValue"])):je("",!0)])]),h.value==="fixed-tab-1"?(le(),Je("div",yo,[ta((le(),Ke(be,{data:p.value,"max-height":500,"empty-text":"暂无数据"},{default:gt(()=>[Q(I,{prop:"MLNAME",label:"线路名称"}),Q(I,{prop:"ElepoName",label:"安装塔杆"}),Q(I,{prop:"SLTYPE",label:"相别"}),Q(I,{prop:"GPSTIME",label:"GPS时间"}),Q(I,{prop:"AEV",label:"电流有效值"}),Q(I,{prop:"VolEvel",label:"电压等级"}),Q(I,{prop:"BATVOL",label:"电池电压V"}),Q(I,{prop:"TA",label:"温度环境"}),Q(I,{prop:"RH",label:"湿度环境"})]),_:1},8,["data"])),[[Se,Ge.value]])])):je("",!0),h.value==="fixed-tab-2"?(le(),Je("div",So,[de("div",{ref_key:"echartsRef",ref:n,style:{width:"100%",height:"300px"}},null,512)])):je("",!0)],512)])])}}}),Ro=fi(ko,[["__scopeId","data-v-8c5ab3a6"]]);export{Ro as default};
